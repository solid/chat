<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Solid Chat</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link
      href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED"
      media="all"
      rel="stylesheet"
      title="W3C-ED"
    />
    <style>
      body {
        counter-reset: section;
        counter-reset: sub-section;
      }
      em.rfc2119 {
        color: #900;
      }
      code,
      samp {
        color: #c83500;
      }
      pre code,
      pre samp {
        color: #000;
      }
      dfn {
        font-weight: inherit;
      }
      .do.fragment a {
        border-bottom: 0;
      }
      .do.fragment a:hover {
        background: none;
        border-bottom: 0;
      }
      section figure pre {
        margin: 1em 0;
        display: block;
      }
      cite .bibref {
        font-style: normal;
      }
      .tabs nav ul li {
        margin: 0;
      }
      div.issue,
      div.note,
      div.warning {
        clear: both;
        margin: 1em 0;
        padding: 1em 1.2em 0.5em;
        position: relative;
      }
      div.issue h3,
      div.note h3,
      div.issue h4,
      div.note h4,
      div.issue h5,
      div.note h5 {
        margin: 0;
        font-weight: normal;
        font-style: normal;
      }
      div.issue h3 > span,
      div.note h3 > span,
      div.issue h4 > span,
      div.note h4 > span,
      div.issue h5 > span,
      div.note h5 > span {
        text-transform: uppercase;
      }
      div.issue h3,
      div.issue h4,
      div.issue h5 {
        color: #ae1e1e;
      }
      div.note h3,
      div.note h4,
      div.note h5 {
        color: #178217;
      }
      figure .example-h {
        margin-top: 0;
        text-align: left;
        color: #827017;
      }
      figure .example-h > span {
        text-transform: uppercase;
      }
      header address a[href] {
        float: right;
        margin: 1rem 0 0.2rem 0.4rem;
        background: transparent none repeat scroll 0 0;
        border: medium none;
        text-decoration: none;
      }
      header address img[src*="logos/W3C"] {
        background: #1a5e9a none repeat scroll 0 0;
        border-color: #1a5e9a;
        border-image: none;
        border-radius: 0.4rem;
        border-style: solid;
        border-width: 0.65rem 0.7rem 0.6rem;
        color: white;
        display: block;
        font-weight: bold;
      }
      main article > h1 {
        font-size: 220%;
        font-weight: bold;
      }

      article
        section:not([id="abstract"]):not([id="sotd"]):not([id="references"]):not([id="appendix"]):not([id="acknowledgements"]):not([id="change-log"]):not([id="exit-criteria"]) {
        counter-increment: section;
        counter-reset: sub-section;
      }
      article
        section:not([id="abstract"]):not([id="sotd"]):not([id="references"]):not([id="appendix"]):not([id="acknowledgements"]):not([id="change-log"])
        section:not([id$="references"]):not([id="exit-criteria"]) {
        counter-increment: sub-section;
        counter-reset: sub-sub-section;
      }
      article
        section:not([id="abstract"]):not([id="sotd"]):not([id="references"]):not([id="appendix"]):not([id="acknowledgements"]):not([id="change-log"])
        section:not([id$="references"]):not([id="exit-criteria"])
        section {
        counter-increment: sub-sub-section;
        counter-reset: sub-sub-sub-section;
      }
      article
        section:not([id="abstract"]):not([id="sotd"]):not([id="references"]):not([id="appendix"]):not([id="acknowledgements"]):not([id="change-log"])
        section:not([id$="references"]):not([id="exit-criteria"])
        section
        section {
        counter-increment: sub-sub-sub-section;
        counter-reset: sub-sub-sub-sub-section;
      }
      article
        section:not([id="abstract"]):not([id="sotd"]):not([id="references"]):not([id="appendix"]):not([id="acknowledgements"]):not([id="change-log"]):not([id="exit-criteria"]):not([id^="table-of-"])
        > h2:before {
        content: counter(section) ".\00a0";
      }
      section:not([id$="references"]):not([id^="change-log"]):not([id="exit-criteria"])
        > h3:before {
        content: counter(section) "." counter(sub-section) "\00a0";
      }
      section > h4:before {
        content: counter(section) "." counter(sub-section) "."
          counter(sub-sub-section) "\00a0";
      }
      #acknowledgements ul {
        padding: 0;
        margin: 0;
      }
      #acknowledgements li {
        display: inline;
      }
      #acknowledgements li:after {
        content: ", ";
      }
      #acknowledgements li:last-child:after {
        content: "";
      }

      dl[id^="document-"] ul {
        padding-left: 0;
        list-style-type: none;
      }
      dl [rel~="odrl:action"],
      dl [rel~="odrl:action"] li {
        display: inline;
      }
      dl [rel~="odrl:action"] li:after {
        content: ",";
      }
      dl [rel~="odrl:action"] li:last-child:after {
        content: "";
      }
    </style>
  </head>

  <body
    about=""
    prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# mem: http://mementoweb.org/ns# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ doap: http://usefulinc.com/ns/doap# deo: http://purl.org/spar/deo/ fabio: http://purl.org/spar/fabio/ cito: http://purl.org/spar/cito/ as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# earl: http://www.w3.org/ns/earl# spec: http://www.w3.org/ns/spec# rel: https://www.w3.org/ns/iana/link-relations/relation# odrl: http://www.w3.org/ns/odrl/2/"
    typeof="schema:CreativeWork prov:Entity as:Article"
  >
    <header>
      <address>
        <a class="logo" href="https://solidproject.org/"
          ><img
            height="66"
            width="72"
            alt="Solid Project"
            src="https://solidproject.org/TR/solid.svg"
        /></a>
      </address>
    </header>

    <main>
      <article about="" typeof="schema:Article doap:Specification">
        <h1 property="schema:name">Solid Chat</h1>
        <h2>Version <span property="doap:revision">1.0.0</span>, Editor’s Draft, 2023-08-21</h2>

        <details open="">
          <summary>More details about this document</summary>

          <dl id="document-identifier">
            <dt>This version</dt>
            <dd>
              <a href="https://solid.github.io/chat/" rel="owl:sameAs"
                >https://solid.github.io/chat/</a
              >
            </dd>
          </dl>
          <!-- 
          <dl id="document-latest-version">
            <dt>Latest version</dt>
            <dd>
              <a
                href="https://solid.github.io/chat/"
                rel="rel:latest-version"
                >https://solid.github.io/chat/</a
              >
            </dd>
          </dl>

          <dl id="document-latest-published-version">
            <dt>Latest published version</dt>
            <dd>
              <a
                href="https://solid.github.io/chat/"
                rel="rdfs:seeAlso"
                >https://solid.github.io/chat/</a
              >
            </dd>
          </dl>
-->

          <dl id="document-editors">
            <dt>Editors</dt>

            <dd id="Tim-Berners-Lee">
              <span about="" rel="schema:editor schema:author"
                ><span
                  about="https://www.w3.org/People/Berners-Lee/card#i"
                  typeof="schema:Person"
                  ><a
                    rel="schema:url"
                    href="https://www.w3.org/People/Berners-Lee/"
                    ><span
                      about="https://www.w3.org/People/Berners-Lee/card#i"
                      property="schema:name"
                      ><span property="schema:givenName">Tim</span>
                      <span property="schema:familyName"
                        >Berners-Lee</span
                      ></span
                    ></a
                  ></span
                ></span
              >
            </dd>

          </dl>

          <dl id="document-contributors">
            <dt>Contributors</dt>
            <dd id="Hadrian-Zbarcea">
              <span about="" rel="schema:editor schema:author"
                ><span about="https://hadrian.solidcommunity.net/profile/card#me" typeof="schema:Person"
                  ><a rel="schema:url" href="https://hadrian.solidcommunity.net/profile/card#me"
                    ><span about="https://hadrian.solidcommunity.net/profile/card#me" property="schema:name"
                      ><span property="schema:givenName">Hadrian</span>
                      <span property="schema:familyName">Zbarcea</span></span
                    ></a
                  ></span
                ></span
              >
            </dd>

          </dl>

          <dl id="document-created">
            <dt>Created</dt>
            <dd>
              <time
                content="2023-08-20T14:00:00Z"
                datatype="xsd:dateTime"
                datetime="2023-08-20T00:00:00Z"
                property="schema:dateCreated"
                >2023-08-20</time
              >
            </dd>
          </dl>
          <!--
          <dl id="document-published">
            <dt>Published</dt>
            <dd>
              <time
                content="2023-08-21T00:00:00Z"
                datatype="xsd:dateTime"
                datetime="2023-08-21T00:00:00Z"
                property="schema:datePublished"
                >2023-08-21</time
              >
            </dd>
          </dl>
 
          <dl id="document-modified">
            <dt>Modified</dt>
            <dd>
              <time
                content="2023-08-21T00:00:00Z"
                datatype="xsd:dateTime"
                datetime="22023-08-21T00:00:00Z"
                property="schema:dateModified"
                >2023-08-21</time
              >
            </dd>
          </dl>
-->
          <dl id="document-repository">
            <dt>Repository</dt>
            <dd>
              <a
                href="https://github.com/solid/chat"
                rel="doap:repository"
                >GitHub</a
              >
            </dd>
            <dd>
              <a
                href="https://github.com/solid/chat/issues"
                rel="doap:bug-database"
                >Issues</a
              >
            </dd>
          </dl>

          <dl id="document-language">
            <dt>Language</dt>
            <dd>
              <span content="en" lang="" property="dcterms:language" xml:lang=""
                >English</span
              >
            </dd>
          </dl>

          <dl id="document-license">
            <dt>License</dt>
            <dd>
              <a
                href="http://purl.org/NET/rdflicense/MIT1.0"
                rel="schema:license"
                >MIT License</a
              > but <b>all code snippets are in the public domain</b>, CC0.
            </dd>
          </dl>

          <dl id="document-status">
            <dt>Document Status</dt>
            <dd
              prefix="pso: http://purl.org/spar/pso/"
              rel="pso:holdsStatusInTime"
              resource="#dc0d85a0-2f9d-43ca-b678-1ad0d84e6bf5"
            >
              <span
                rel="pso:withStatus"
                resource="http://purl.org/spar/pso/draft"
                typeof="pso:PublicationStatus"
                >Editor’s Draft</span
              >
            </dd>
          </dl>

          <dl id="document-policy">
            <dt>Policy</dt>
            <dd>
              <dl
                id="document-policy-offer"
                rel="odrl:hasPolicy"
                resource="#document-policy-offer"
                typeof="odrl:Policy"
              >
                <dt>Rule</dt>
                <dd>
                  <a
                    about="#document-policy-offer"
                    href="https://www.w3.org/TR/odrl-vocab/#term-Offer"
                    typeof="odrl:Offer"
                    >Offer</a
                  >
                </dd>
                <dt>Unique Identifier</dt>
                <dd>
                  <a
                    href="https://solidproject.org/TR/chat#document-policy-offer"
                    rel="odrl:uid"
                    >https://solidproject.org/TR/chat#document-policy-offer</a
                  >
                </dd>
                <dt>Target</dt>
                <dd>
                  <a
                    href="https://solidproject.org/TR/chat"
                    rel="odrl:target"
                    >https://solidproject.org/TR/chat</a
                  >
                </dd>
                <dt>Permission</dt>
                <dd>
                  <dl
                    id="document-permission"
                    rel="odrl:permission"
                    resource="#document-permission"
                    typeof="odrl:Permission"
                  >
                    <dt>Assigner</dt>
                    <dd>
                      <a
                        rel="odrl:assigner"
                        href="https://github.com/solid/"
                        >Solid Organization</a
                      >
                    </dd>
                    <dt>Action</dt>
                    <dd>
                      <ul rel="odrl:action">
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-aggregate"
                            resource="odrl:aggregate"
                            >Aggregate</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-archive"
                            resource="odrl:archive"
                            >Archive</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-concurrentUse"
                            resource="odrl:concurrentUse"
                            >Concurrent Use</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-DerivativeWorks"
                            resource="http://creativecommons.org/ns#DerivativeWorks"
                            >Derivative Works</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-derive"
                            resource="odrl:derive"
                            >Derive</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-digitize"
                            resource="odrl:digitize"
                            >Digitize</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-display"
                            resource="odrl:display"
                            >Display</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-Distribution"
                            resource="http://creativecommons.org/ns#Distribution"
                            >Distribution</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-index"
                            resource="odrl:index"
                            >Index</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-inform"
                            resource="odrl:inform"
                            >Inform</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-install"
                            resource="odrl:install"
                            >Install</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-Notice"
                            resource="http://creativecommons.org/ns#Notice"
                            >Notice</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-present"
                            resource="odrl:present"
                            >Present</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-print"
                            resource="odrl:print"
                            >Print</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-read"
                            resource="odrl:read"
                            >Read</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-reproduce"
                            resource="odrl:reproduce"
                            >Reproduce</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-Reproduction"
                            resource="http://creativecommons.org/ns#Reproduction"
                            >Reproduction</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-stream"
                            resource="odrl:stream"
                            >Stream</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-synchronize"
                            resource="odrl:synchronize"
                            >Synchronize</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-textToSpeech"
                            resource="odrl:textToSpeech"
                            >Text-to-speech</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-transform"
                            resource="odrl:transform"
                            >Transform</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://www.w3.org/TR/odrl-vocab/#term-translate"
                            resource="odrl:translate"
                            >Translate</a
                          >
                        </li>
                      </ul>
                    </dd>
                  </dl>
                </dd>
              </dl>
            </dd>
          </dl>
        </details>

        <p class="copyright">
          W3C License. Copyright © 2022-2023
          <a href="http://github.com/solid/"
          >W3C</a>. All code snippets public domain.
        </p>

        <div datatype="rdf:HTML" id="content" property="schema:description">
          <section id="abstract">
            <h2>Abstract</h2>
            <div datatype="rdf:HTML" property="schema:abstract">
              A Solid chat channel is a object in a Solid pod which allows
              a series of text (or multimedia) messages over time to be 
              accumulated as an interactive discussion between one or more people (or other agents)
              Chat messages are written directly by the participants into a series of chat files
              organized by date. Participants watch the current chat file for updates in real time
              using Solid Live Update functionality.
              A chat channel may also have  just one author, in which case
              it can function as a private "note to self" or as public or shared stream of thoughts.
              This format is designed to be able to interoperate with existing chat systems like
              Internet Relay Chat, Matrix, etc. The original version did not include threads or replies,
              but this one does.
              Also included is the use of social reactions, for which schema.org's Action 
              class and subclasses are used, with literal emojis as content.
              
              This format is also designed to be
              suitable for archives of channels using other protocols.   

            </div>
          </section>

          <section id="sotd" inlist="" rel="schema:hasPart" resource="#sotd">
            <h2 property="schema:name">Status of This Document</h2>
            <div property="schema:description" datatype="rdf:HTML">
              <p>
                This section describes the status of this document at the time
                of its publication.
              </p>

              <p>
                This document was published by the
                <a href="https://www.w3.org/community/solid/"
                  >Solid Community Group</a
                >
                as an <em>Editor’s Draft</em>. The information in this document
                is still subject to change. You are invited to
                <a href="https://github.com/solid/chat/issues"
                  >contribute</a
                >
                any feedback, comments, or questions you might have.
              </p>

              <p>
                Publication as an <em>Editor’s Draft</em> does not imply
                endorsement by the
                <abbr title="World Wide Web Consortium">W3C</abbr> Membership.
                This is a draft document and may be updated, replaced or
                obsoleted by other documents at any time. It is inappropriate to
                cite this document as other than work in progress.
              </p>

              <p>
                This document was produced by a group operating under the
                <a href="https://www.w3.org/community/about/agreements/cla/"
                  >W3C Community Contributor License Agreement (CLA)</a
                >. A human-readable
                <a
                  href="https://www.w3.org/community/about/agreements/cla-deed/"
                  >summary</a
                >
                is available.
              </p>
            </div>
          </section>

          <nav id="toc">
            <h2 id="table-of-contents">Table of Contents</h2>
            <div>
              <ol class="toc">
                <li class="tocline">
                  <a class="tocxref" href="#abstract">Abstract</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#sotd">Status of This Document</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#introduction"
                    ><span class="secno">1</span>
                    <span class="content">Introduction</span></a
                  >
                  <ol>
                    <li>
                      <a href="#terminology"
                        ><span class="secno">1.1</span>
                        <span class="content">Terminology</span></a
                      >
                    </li>
                    <li>
                      <a href="#namespaces"
                        ><span class="secno">1.2</span>
                        <span class="content">Namespaces</span></a
                      >
                    </li>
                    <li>
                      <a href="#conformance"
                        ><span class="secno">1.3</span>
                        <span class="content">Conformance</span></a
                      >
                    </li>
                  </ol>
                </li>
                <li class="tocline">
                  <a href="#channel"
                    ><span class="secno">2</span>
                    <span class="content">Chat Channel</span></a>                
                </li>
                <li class="tocline">
                  <a href="#message"
                    ><span class="secno">3</span>
                    <span class="content">Chat Message</span></a>                
                </li>
                <li class="tocline">
                  <a href="#replies"
                    ><span class="secno">4</span>
                    <span class="content">Threads and Replies</span></a>                
                </li>
                <li class="tocline">
                  <a href="#modified"
                    ><span class="secno">5</span>
                    <span class="content">Deleted and Modified Messages</span></a>                
                </li>
    
                <li class="tocline">
                  <a href="#actions"
                    ><span class="secno">6</span>
                    <span class="content">Actions</span></a>                
                </li>

                <li class="tocline">
                  <a href="#access-control"
                    ><span class="secno">7</span>
                    <span class="content">Access Control</span></a>                
                </li>

                <li class="tocline">
                  <a href="#preferences"
                    ><span class="secno">8</span>
                    <span class="content">Preferences</span></a>                
                </li>

                <li class="tocline">
                  <a href="#discovery"
                    ><span class="secno">9</span>
                    <span class="content">Discovery</span></a>                
                </li>

                <li class="tocline">
                  <a href="#considerations"
                    ><span class="secno">10</span>
                    <span class="content">Considerations</span></a
                  >
                  <ol>
                    <li>
                      <a class="tocxref" href="#security-considerations"
                        ><span class="secno">10.1</span>
                        <span class="content">Security Considerations</span></a
                      >
                    </li>
                    <li>
                      <a class="tocxref" href="#privacy-considerations"
                        ><span class="secno">10.2</span>
                        <span class="content">Privacy Considerations</span></a
                      >
                    </li>
                    <li>
                      <a class="tocxref" href="#i18n-considerations"
                        ><span class="secno">10.3</span>
                        <span class="content">Internationalization Considerations</span></a
                      >
                    </li>
                    <li>
                      <a class="tocxref" href="#accy-considerations"
                        ><span class="secno">10.4</span>
                        <span class="content">Accessibility Considerations</span></a
                      >
                    </li>
                  </ol>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#references">References</a>
                  <ol>
                    <li>
                      <a class="tocxref" href="#Normative-References"
                        >
                        <span class="content">Normative References</span></a
                      >
                    </li>
                  </ol>
                  <ol>
                    <li>
                      <a class="tocxref" href="#Informative-References"
                        >
                        <span class="content">Informative References</span></a
                      >
                    </li>
                  </ol>
                </li>
              </ol>
            </div>
          </nav>

          <section
            id="introduction"
            inlist=""
            rel="schema:hasPart"
            resource="#introduction"
          >
            <h2
              about="#introduction"
              property="schema:name"
              typeof="deo:Introduction"
            >
              Introduction
            </h2>
            <div datatype="rdf:HTML" property="schema:description">
              <p><em>This section is non-normative.</em></p>
             
              <p>
                A solid chat channel provides functionality similar to the functionality
                of chat protocols like IRC channels and Matrix rooms, and like 
                platforms such as Slack, WhatsApp chat, and so on.
                Anyone can host a chat on their pod, and invite others to join (or not).
                Those who are allowed to participate in the channel are given
                Append mode access to a part of the pod where they can create 
                new chat files and add messages to existing ones.
                Deletion and modification of messages are done not by changing 
                the existing message, but by appending more information to note that 
                it has been edited or deleted.
              </p>
              <p>Apart from the messages themselves, which are in dated directories (LDP containers)
                there is preferences information controlling the display format and options
                and a list of those participating.
              </p>

              <p>This specification is part of the work called 
                for by the <a href="https://solidproject.solidcommunity.net/Verticals/Roadmap/state.ttl#Iss1595501681113">The Chat - Instant Messages</a> 
                item in the <a href="https://solidproject.solidcommunity.net/Verticals/Roadmap/index.ttl#this">Solid Verticals Roadmap</a>.
                It is a client-client specification, in that the pod server does not need to be aware of it at all.
                The clients - Solid Apps - use it to make the chat data interoperable across different apps.
                </p>
            </div>

            <section
              id="terminology"
              inlist=""
              rel="schema:hasPart"
              resource="#terminology"
              typeof="skos:ConceptScheme"
            >
              <h3 property="schema:name skos:prefLabel">Terminology</h3>
              <div datatype="rdf:HTML" property="schema:description">
                <p><em>This section is non-normative.</em></p>
 

                <p>
                  This document uses terminology from the
                  <cite
                    ><a href="https://solidproject.org/TR/protocol"
                      >Solid Protocol</a
                    ></cite
                  >
                  [<cite
                    ><a class="bibref" href="#bib-solid-protocol"
                      >SOLID-PROTOCOL</a
                    ></cite
                  >] and
                  <cite
                    ><a href="https://www.w3.org/2005/Incubator/webid/spec/identity/"
                      >WebID</a
                    ></cite
                  >
                  [<cite><a class="bibref" href="#bib-webid">WebID</a></cite
                  >] specifications. When terminology is used from these specifications it is linked directly to them.
                </p>

                <dl rel="skos:hasTopConcept">
                  <dt
                    about="#webid"
                    property="skos:prefLabel"
                    typeof="skos:Concept"
                  >WebID</dt>
                  <dd>
                    A <dfn id="webid">WebID</dfn> is a URI with an HTTP or HTTPS scheme which denotes an Agent
                     (Person, Organization, Group, autonomous software agent (bot), etc.). For WebIDs with fragment identifiers (e.g. #me), 
                     the URI without the fragment denotes the Profile Document.
                      For WebIDs without fragment identifiers an HTTP request on the WebID 
                      returns a 303 with a Location header URI referring to the Profile Document.
                  </dd>
                </dl>

              </div>
            </section>

            <section
              id="namespaces"
              inlist=""
              rel="schema:hasPart"
              resource="#namespaces"
            >
              <h3 property="schema:name">Namespaces</h3>
              <div datatype="rdf:HTML" property="schema:description">
                <table>
                  <caption>
                    Prefixes and Namespaces
                  </caption>
                  <thead>
                    <tr>
                      <th>Prefix</th>
                      <th>Namespace</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>rdf</code></td>
                      <td>http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
                      <td>
                        [<cite
                          ><a class="bibref" href="#bib-rdf-schema"
                            >rdf-schema</a
                          ></cite
                        >]
                      </td>
                    </tr>
                    <tr>
                      <td><code>solid</code></td>
                      <td>http://www.w3.org/ns/solid/terms#</td>
                      <td>Solid Terms</td>
                    </tr>

                    <tr>
                      <td><code>vcard</code></td>
                      <td>http://www.w3.org/2006/vcard/ns#</td>
                      <td>
                        [<cite
                          ><a class="bibref" href="#bib-vcard"
                            >VCARD-RDF</a
                          ></cite
                        >]
                      </td>
                    </tr>

                   <tr>
                      <td><code>schema</code></td>
                      <td>http://schema.org/</td>
                      <td>schema.org                 
                      </td>
                    </tr>

                    <tr>
                      <td><code>meeting</code></td>
                      <td>http://www.w3.org/ns/pim/meeting#</td>
                      <td>Meeting ontology
                      </td>
                    </tr>

                    <tr>
                      <td><code>wf</code></td>
                      <td>http://www.w3.org/2005/01/wf/flow#</td>
                      <td>Workflow ontology
                      </td>
                    </tr>

                  </tbody>
                </table>
              </div>
            </section>

            <section
              id="conformance"
              inlist=""
              rel="schema:hasPart"
              resource="#conformance"
            >
              <h3 property="schema:name">Conformance</h3>
              <div datatype="rdf:HTML" property="schema:description">
                <p>
                  All assertions, diagrams, examples, and notes are
                  non-normative, as are all sections explicitly marked
                  non-normative. Everything else is normative.
                </p>

                <p>All shapes <em>are</em> normative, though they open: they allow other data to be added.</p>

                <p>Notes in this document are not normative, are shown like this:</p>
                <p class="note">This is a note.</p>
                <p>
                  Examples in this specification are introduced with the word "for example" or
                  are set apart from the normative text like this:
                </p>
                  <figure
                    class="example listing"
                    id="example"
                    rel="schema:hasPart"
                    resource="#example"
                  >
                    <p class="example-h">
                      <span>Example 1</span>
                    </p>
                    <pre
                      about="#example"
                      property="schema:description"
                      typeof="fabio:Script"
                    >
                      <code>This is an example.</code>
                    </pre>
                  </figure>

              </div>
            </section>
            <section>
              <h3 property="schema:name">Brief History</h3>
              <p>On the W3C website, Internet Relay Chat (IRC) logs have been stored in RDF form, for example
                 by RRSAgent, for many many years.  The pre-Solid SWAP and Tabulator projects at MIT/CSAIL and collaborators
                 made a chat system which used the read/write/live aspects of the data stores they were developing
                 to make two forms of chat. One (ShortChat) was a simple chat in which all the messages
                  were stored in the same resource.
                  The other was a chat channel which stored 
                 data in YYYY/MM/DD dated subfolders much like directly writing a log of an IRC channel.
                 The SolidOS project adopted both of these, but it was felt that difference between them
                 was not helpful, and the short chat should be dropped in favor of the long chat.
                 The LongChat implementation functionality included message deletion and editing, but not replies or threads.
                 It was used to store a pod-based reference copy of the Gitter chats around which a lot of the
                 open source collaborative world revolved. This used a gateway which imported Gitter chat into Solid using the Gitter API.
                 Other chat implementations at that time included Jackson Morgan's liqidChat.
                 In time Gitter abandoned their API and switched to the Matrix protocol, which is a common chat protocol.
                 The Solid community then switched the <a href="https://github.com/solid-contrib/gitter-solid">gateway</a> to the Matrix protocol.
                   Meanwhile, Matrix were adding threads to their system,
                 and so at that stage both the gateway and the SolidOS client implementation were updated to support threads.

                </p>
            </section>
          </section>

          <section id="channel" inlist="" rel="schema:hasPart" resource="#channel">
            <h2 property="schema:name">Chat Channel</h2>
            <p>
              This document describes the structure of the data in a chat channel,
              the main class of which is <code>LongChat</code>.
              The chat data is a set of RDF triples - linked data links.
              It also suggests and sometimes requires specific URIs to be used for different structure.
              When reading a chat channel, where there are links, those must  be followed,
              and no assumptions made about the URIs.
              An exception is the YYYY/MM/DD date structure for day chat files,
              where the URI must be created from the UTC date of the message.
            </p>
            <p>
            A chat channel is all built inside a single folder (LDP Container) in a pod.
            Let us call the URI of that folder -- less its final '/' -- <code>$ROOT</code>. 
            It could be say, <code>https://alice.example.org/Bob/OurChat</code>
            Developers must never make assumptions about where a chat channel is
            stored as chats are used within other apps (such as issue trackers and meetings) 
            which create the container for them.

            </p>
            <p>Within that folder, the main channel is normally <code>$ROOT/index#this</code></p>

            <pre notation="turtle">

            </pre>



            <img style="width:80%" src="diagrams/SolidChatShapes.svg" rel="schema:image" alt="Class/Property diagram for Solid Chat"/>

            <p class="example-h">
              <span>A simple Long Chat instance</span>
            </p>

            <figure
            class="example listing"
            id="channelExample"
            rel="schema:hasPart"
            resource="#channelExample"
          >
            <p class="example-h">
              <span>A simple Long Chat instance</span>
            </p>
            <pre
              about="#example"
              property="schema:description"
              typeof="fabio:Script"
            >
              <code>
                # in $ROOT/index.ttl

                @prefix : &lt;#>.
                @prefix dc: &lt;http://purl.org/dc/elements/1.1/>.
                @prefix meeting: &lt;http://www.w3.org/ns/pim/meeting#>.
                
                :this
                    a meeting:LongChat;
                    dc:title "Chat about this example" .
              </code>
            </pre>
          </figure>

          </section>

          <section id="message" inlist="" rel="schema:hasPart" resource="#message">
            <h2 property="schema:name">Chat Message</h2>

            <p>Here is an example message:</p>

            <figure
            class="example listing"
            id="examplemessage"
            rel="schema:hasPart"
            resource="#examplemessage"
          >
            <p class="example-h">
              <span>An example message</span>
            </p>
            <pre
              about="#example"
              property="schema:description"
              typeof="fabio:Script"
            >
              <code>
                <../../../index.ttl#this> meeting:message :message95487593 .
            :message95487593
                dct:created "2023-02-20T21:36:09Z"^^xsd:dateTime;
                sioc:content """Hello world!""";
                foaf:maker &lt;../../../../../Person/alice-54d26c98db8155e6700f7312%3Agitter.im/index.ttl#this>.
</code>
            </pre>
          </figure>
          <p class="note">Note that each message does not have an explicit type.  This is just to save storage.
            It does have, in the chat file, a <code>meeting:message</code> link from the channel to the message.
            In the shapes, we use the class <code>schema:Message</code> but while there was also <code>sioc:Post</code>, nothing
            we could find seemed to capture Chat Message perfectly.
          </p>
<p>Here is a shape a chat message must match:</p>

<figure class="shape listing" id="messageshape" rel="schema:hasPart" resource="#messageshape">
<p class="example-h">
  <span>Message shape</span>
</p>
<pre about="#messageshape" property="schema:description" typeof="fabio:Script">
  <code>
:MessageShape a  sh:NodeShape;
    sh:targetClass schema:Message;
    sh:targetObjectsOf meeeting:message;  # No can be other things
    sh:closed false ; # different message systems may have all kinds of metadata 

    sh:property [
		sh:path dct:created ;
        sh:message "A chat message must have a creation date.";
        sh:datatype xsd:dateTime; # Must be UTC

        sh:count 1;
	];

  sh:property [
		sh:path sioc:content ;
        sh:message "A chat message must have a content.";
        sh:datatype xsd:string;

        sh:count 1;
	];

  sh:property [
		sh:path foaf:maker ;
        sh:message "A chat message must have one creator.";
        sh:count 1;
	];
  sh:property [
		sh:path dct:isReplacedBy ;
        sh:message "A chat message can only have one replacement.";
        dh:dataType schema:Message;
        sh:maxCount 1;
	];
 
  sh:property [
		sh:path schema:dateDeleted ;
        sh:message "A chat message can only have one deletion date.";
        dh:dataType xsd:dateTime;
        sh:maxCount 1;
	];

  sh:property [
		sh:path [ sh:inverse meeting:message ] ;
        sh:message "A chat message should know its chat channel.";
        sh:maxCount 1;
        sh:dataType meeting:LongChat;

	] .  </code>
</pre>
</figure>

<p>The use of the properties of a message are as follows.</p>

<table><tr><th>Message Property</th><th>Use</th></tr>
  <tr><td>dct:created</td><td>Mandatory UTC datetime the message is sent.</td></tr>
  <tr><td>foaf:maker</td><td>Mandatory WebID of the message sender</td></tr>
  <tr><td>sioc:content</td><td>Mandatory unicode text of the message content.</td></tr>
  <tr><td>dct:isReplacedBy</td><td>Message editing is discussed below</td></tr>
  <tr><td>schema:dateDeleted</td><td>Message deletion is discussed below</td></tr>
  <tr><td>sioc:has_reply</td><td>Replies and threads are discussed below</td></tr>
  <tr><td>Reverse meeting:message</td><td>Points from the chat channel to the message</td></tr>
</table>

<p>When writing a chat message to a chat file, an interactive chat client must use an HTTP <code>PATCH</code> method.
This is because the chat file may be being updated by other clients at the same time.
It also has the semantics that the resource is automatically created if it does not previously exist.
</p>
<p>An interactive client must also watch the latest resource, the one corresponding to today's UTC date,
  to see if it changes.  This is done using the Solid Live Update protocol. 
  </p><p class="note">
  Note that while in August 2023 this uses Web Sockets to
  listen for changes, in future it may use other notification/watch/listen protocols
</p>
          </section>

          <section id="replies" inlist="" rel="schema:hasPart" resource="#replies">
            <h2 property="schema:name">Threads and Replies</h2>

            <p>Reply is a single message which is made in response to one original message.
                A thread is a series of messages in response to the same original message.</p>
                <p class="note">In the screenshot below (of the Element matrix client running on Mac) the designer 
                  has chosen to show the thread messages to one side while the replies are in line.
                  On small screens, a thread typically takes the whole screen. 
                  This document does not define the user interface choices the designers make.
                </p>
                <img style="width:80%" src="screenshots/Screenshot-3.png" rel="schema:image" alt="The thread messages are to one side while replies are in line"/>



                <p>Example of a reply to an edited message:</p>
                <figure
                class="example listing"
                id="examplereply"
                rel="schema:hasPart"
                resource="#examplereply"
              >
                <p class="example-h">
                  <span>An example non-thread reply</span>
                </p>
                <pre
                  about="#example"
                  property="schema:description"
                  typeof="fabio:Script"
                >
                  <code>
:YclVtjeT3mfFu-bD-XKbsKpRsaPaEW_7JCQVBEOCWvY
    dct:created "2023-08-24T20:48:32Z"^^xsd:dateTime;
    sioc:content "Looking at has_reply issue.";
    sioc:has_reply :HxuJZPg18me8iX8sB18Nb2Oo9ObJwMLS7GRoJUfDV_Y;
    sioc:id <matrix:///e/YclVtjeT3mfFu-bD-XKbsKpRsaPaEW_7JCQVBEOCWvY>;
    foaf:maker ind:this.

:HxuJZPg18me8iX8sB18Nb2Oo9ObJwMLS7GRoJUfDV_Y
    dct:created "2023-08-24T20:49:02Z"^^xsd:dateTime;
    sioc:content
        """> <@alice:example.com> Looking at has_reply issue.
Normal reply to this should be done right""";
    sioc:id <matrix:///e/HxuJZPg18me8iX8sB18Nb2Oo9ObJwMLS7GRoJUfDV_Y>;
    foaf:maker ind:this.

n4:this wf:message
        :HxuJZPg18me8iX8sB18Nb2Oo9ObJwMLS7GRoJUfDV_Y,
        :YclVtjeT3mfFu-bD-XKbsKpRsaPaEW_7JCQVBEOCWvY.
</code>
                </pre>
              </figure>
    
              <p class="note">
                Note that in that example was converted from a Matrix message.
                The matrix client has added a quoted part of the message being replied to. 
                Normal Solid clients should not do that, but should leave to the client UX to make it clear which message it is a reply to.
                Which could be positioning on the screen, could have an overlapped shadow rendering of that message, for example.
                This could also be in future a (receiving) user preference.
              </p>


            <p>By contrast, here is an example of a thread:</p>
            <figure
            class="example listing"
            id="examplethread"
            rel="schema:hasPart"
            resource="#examplethread"
          >
            <p class="example-h">
              <span>An example thread</span>
            </p>
            <pre
              about="#example"
              property="schema:description"
              typeof="fabio:Script"
            >
              <code>
                :GVu4AdmzBFnQvuLRvX0e8wc6oNOPdV0ki_qcJjDdbzk-thread
                a sioc:Thread;
                sioc:has_member
                    :2Bw5IeK9IeHnVNtzkOgAovUFix49JaociYdTO6G-F3w,
                    :FtmPJ0s6ezS4qCjisqqkqux1nAuSU7QnZrxQNBfwHSQ,
                    :Uf6jIvxd_j4l6JwWGke9rpLCPeQXHFVKWVWiJ2mmR_Q,
                    ch:tYDpio1b09O_JlXJ-KEgdLXNhc235bq32PkPNB_hou0 .
</code>
            </pre>
          </figure>
<p>In general, a thread is a structure which must match this shape.
  It is stored in the same chat file as the message
  which is the first member of the thread.
  The member messages in the thread are sorted by the creation date.
</p>
          <figure
          class="shape listing"
          id="threadshape"
          rel="schema:hasPart"
          resource="#examplethread"
        >
          <p class="example-h">
            <span>Thread shape</span>
          </p>
          <pre
            about="#threadshape"
            property="schema:description"
            typeof="fabio:Script"
          >
            <code>
              :ThreadShape a sh:NodeShape;
              sh:targetClass sioc:Thread;
                sh:property [
              sh:path rdf:type ;
                  sh:value sioc:Thread;
                  sh:count 1;
            ]  ;
            sh:property [
              sh:path sioc:has_member ;
                  sh:dataType schema:Message;
                  sh:message "A thread must have a member or members.";
                  sh:minCount 1;
            ] .</code>
          </pre>
        </figure>
<p>When a thread membership link connects a thread and a message on different day files, the link
  is repeated in both resources so that it can be followed either way. </p>

          </section>

          <section id="modified" inlist="" rel="schema:hasPart" resource="#modified">
            <h2 property="schema:name">Deleted and Modified Messages</h2>
            <p>When a message is deleted or modified, the original is not in fact removed from the store. 
              It instead marked as deleted, or linked by <code>dct:isReplacedBy</code> to a new version of the message.
               The UI is responsible for
              showing the newest version, or suppressing the display.
            </p>
            <p>When the original and replacement messages are in different chat files, then the
              <code>dct:isReplacedBy</code> triple should be written to just the document of the original message.
            </p>

            <figure
            class="example listing"
            id="modifiedexample"
            rel="schema:hasPart"
            resource="#modifiedexample"
          >
            <p class="example-h">
              <span>An example edited message</span>
            </p>
            <pre
              about="#modifiedexample"
              property="schema:description"
              typeof="fabio:Script"
            >
              <code>
# in 20/chat.ttl :

      :GVu4AdmzBFnQvuLRvX0e8wc6oNOPdV0ki_qcJjDdbzk
            dct:created "2023-02-20T21:35:54Z"^^xsd:dateTime;
            dct:isReplacedBy ch:E6aFyaxMid9OajRNSCx3IL4Wc7nqIX-qLhXLj9HN2Wc;
            sioc:content "A1 - root message in the main chat";
            foaf:maker n2:this.
        
# in 25/chat.ttl :

      :E6aFyaxMid9OajRNSCx3IL4Wc7nqIX-qLhXLj9HN2Wc
            dct:created "2023-02-25T14:02:51Z"^^xsd:dateTime;
            sioc:content " * A1 - root message in the main chat EDITED";
            foaf:maker n2:this.

</code>
            </pre>
          </figure>            
<p>When a message is deleted, it is replaced by a message which is marked as deleted with a
   <code>dateDeleted</code> property. For example:</p>

<figure
class="example listing"
id="deletedexample"
rel="schema:hasPart"
resource="#deletedexample"
>
<p class="example-h">
  <span>An example edited message</span>
</p>
<pre
  about="#deletedexample"
  property="schema:description"
  typeof="fabio:Script"
>
  <code>
@prefix c22: &lt;https://alice.example.net/profile/card#>.
@prefix n6: <../../../index.ttl#>.

:Msg1692883560076
    dct:created "2023-08-24T13:26:00Z"^^xsd:dateTime;
    dct:isReplacedBy :Msg1692883677430;
    sioc:content "24th - looking at deleted messages";
    foaf:maker c22:me.

:Msg1692883677430
    dct:created "2023-08-24T13:27:57Z"^^xsd:dateTime;
    sioc:content "(message deleted)";
    schema:dateDeleted "2023-08-24T13:27:57Z"^^xsd:dateTime;
    foaf:maker c22:me.

n6:this wf:message :Msg1692883560076 .
</code>
</pre>
</figure>            
<p class="note">Note that the form of a deletion is such that an implementation which knows about replacement 
but does not know about <code>schema:dateDeleted</code> will do the right thing if
the content of the deletion message is something like "(message deleted)".</p>

<p>Edited messages may be further edited, as shown in the <a href="diagrams/SolidChatShapes.svg">diagram</a>.</p>
<p>Edited messages may be deleted.  Deleted messaged may <strong>not</strong> be edited.</p>
            
          </section>
          <section id="actions" inlist="" rel="schema:hasPart" resource="#actions">
            <h2 property="schema:name">Actions</h2>
            <p>A person responds with a social action (such as "like") on an existing message
              by writing the action into the same chat file as the message. </p>
              <pre class="example">
                &lt;#action0876> schema:agent &lt;https://bob.example.com/profile/card#me> ;
                              a schema:AgreeAction ;
                              &lt;http://schema.org/target> &lt;#Msg1677678647433> .

                &lt;#action0888> schema:agent &lt;https://alice.example.com/profile/card#me> ;
                              a schema:AgreeAction ;
                              scioc:content "👍";
                              &lt;http://schema.org/target> &lt;#Msg1677678647433> .

                &lt;#action099> schema:agent &lt;https://charlie.example.com/profile/card#me> ;
                              a schema:Action ;
                              scioc:content "⭐️";
                              &lt;http://schema.org/target> &lt;#Msg1677678647433> .

              </pre>
              <p>They must give their own webid as the agent.  Apps must <strong>not</strong> allow a different webid to be given.</p>

            <p>The schema ontology has a few standard forms of action.  Those should be converted into
              appropriate symbols or icons by the client.</p>

              <table>
                <tr><th>Subclass of Action</th><th>Typical Emoji</th></tr>
                <tr><td>AgreeAction</td><td>👍</td></tr>
                <tr><td>DisagreeAction</td><td>👎</td></tr>
                <tr><td>EndorseAction</td><td>⭐️</td></tr>
                <tr><td>LikeAction</td><td>❤️</td></tr>
              </table>
              <p>An emoji may also be given in the sioc:content of the action.</p>
              <p> 
                When an application uses an emoji to represent the Action, then if the content is given,
                and it is a single valid emoji should be used.

                An sender must <strong>not</strong> have both a subclass of  <code>schema:Action</code> and an
                emoji which is inconsistent from the table.  A receiver must ignore any such inconsistent Action.
                </p><p>
                When no content is given, the receiver can pick an emoji
                as appropriate to the given subclass of Action,
                as in the table above.</p>
          </section>

          <section id="access-control" inlist="" rel="schema:hasPart" resource="#access-control">
            <h2 property="schema:name">Access Control</h2>
            <p>
              The access control for a chat channel must be set to reflect the user's wishes.
              One can recognize three roles: the owner of the channel who creates it,
              the participants who are allowed to write to it, and the viewers who are allowed to read it.
            </p>
            <table><tr><th>Resource</th><th>Owner</th><th>Participant</th><th>Viewer</th></tr>
              <tr><td>Channel file</td><td>RWAC</td><td>RWA</td><td>R</td></tr>
              <tr><td>Root folder default</td><td>RWAC</td><td>RA</td><td>R</td></tr>
              <tr><td>Day chat file</td><td>RWAC</td><td>RA</td><td>R</td></tr>
            </table>
            <p>Where RWAC means Read, Write, Append, Control.</p>
            <p class="note">Note that the sets of agents in each role may in fact be suggested or
              required by another app which creates the chat in a particular context, a larger system.</p>
          </section>

          <section id="preferences" inlist="" rel="schema:hasPart" resource="#preferences">
            <h2 property="schema:name">Preferences</h2>
            <p>User preferences for chat allow many things
               to be changed in how messages are presented
              to the user.  Each preferences option can
               be set in each of three separate places, which take 
              precedence in priority order.
            </p>
          <ol>
            <li>If set, the user's preference for this chat channel.</li>
            <li>Failing that, then the chat owner's preference for this chat channel</li>
            <li>Failing that, the user's personal preferences for chat channels everywhere</li>
            <li>Failing that, the UX designer of the app.</li>
          </ol>

<p>(One can imagine future chat clients requiring different again preference options
   -- say voice and speed for a voice based client.)</p>




   <figure
class="example listing"
id="preferencesExample"
rel="schema:hasPart"
resource="#preferencesExample"
>
<p class="example-h">
  <span>An example of user's preferences</span>
</p>
<pre
  about="#preferencesExample"
  property="schema:description"
  typeof="fabio:Script"
>
  <code>
    @prefix c1: &lt;https://alice.solidcommunity.net/profile/card#>.
    @prefix c2: &lt;https://bob.example.net/profile/card#>.
    @prefix c3: &lt;https://pod.charlie.example./profile/card#>.

:this a meeting:LongChat;
    dct:author c1:me;
    dct:created "2018-07-06T21:36:04Z"^^XML:dateTime;
    dct:title "Our Chat channel";

    wf:participation
        :id1530912972126, :id1538415256782, :id1538415459106 .
  
        :id1530912972126
            ic:dtstart "2018-07-06T21:36:12Z"^^XML:dateTime;
            flow:participant c1:me;
            solid:expandImagesInline true;
            ui:backgroundColor "#c1d0c8".
  
        :id1538415256782
            ic:dtstart "2018-07-07T11:16:12Z"^^XML:dateTime;
            flow:participant c2:me;
            solid:expandImagesInline false;
            ui:backgroundColor "#ffccdd".

        :id1538415509711
            cal:dtstart "2018-10-01T17:38:29Z"^^xsd:dateTime;
            wf:participant c3:me;
            solid:colorizeByAuthor true;
            solid:expandImagesInline true;
            solid:inlineImageHeightEms 10;
            solid:newestFirst true;
            ui:backgroundColor "#c8f1f1".
  </code>
</pre>
</figure>    
<p>In the example above, data in the main chat channel file, <code>$ROOT/index.ttl#this</code>,
show that Alice made the chat, and has background color <code>#c1d0c8</code>;
and Bob has turned off image expansion for his view of the chat, 
and Charlie has turned on the image epansion with image height set to 10em,
has their messages sorted with the latest at the top,
and has then coloured by author.
Apart from that they have left the default.
</p>
<p>The default settings in the table below are not normative.</p>

 <table><tr><th>Preferences property</th><th>Effect</th><th>possible default</th></tr>
  <tr><td><code>solid:newestFirst</code></td><td>Messages are displayed with the most recent at the top of the display</td><td>False</td></tr>
  <tr><td><code>solid:colorizeByAuthor</code></td><td>Make the background color of each message be different for author. As specified by the author's preference, or by hashing their webid.</td><td>True</td></tr>
  <tr><td><code>solid:expandImagesInline</code></td><td>Expand images inline</td><td>True</td></tr>
  <tr><td><code>solid:inlineImageHeightEms</code></td><td>If images are expanded inline, then their height in Ems</td><td>Implementation dependent</td></tr>
  <tr><td><code>ui:backgroundColor</code></td><td>When messages are colors by the user sending them, this is the color for this user.</td><td>Implementation dependent</td></tr>
</table>
<p>@@ Add where the person-global and instance specific preference values stored.</p>
          </section>

          <section id="discovery">
            <h2>Discovery</h2>
            <p>The RDF class used to register an instance of a chat channel
               is <code>meeting:LongChat</code><div class="
              The <a href="#bib-type-indexes">Type Indexes</a> may be used with that Class to create
              a personal note of the Chat to find it later, a similar note 
              but shared with others in a community, or a public note, in which case 
              systems displaying their profile will typically allow others to find the chat.
            </p></p> To make a link to a chat, one does not have to be the owner of it,
            or a participant.  The access control does not have to match: it is possible to
            have a private link to a public resource and vice-versa.

              </p>
          </section>

          <section
            id="considerations"
            inlist=""
            rel="schema:hasPart"
            resource="#considerations"
            typeof="skos:ConceptScheme"
          >
            <h2 property="schema:name skos:prefLabel">
              Considerations
            </h2>
            <div datatype="rdf:HTML" property="schema:description">
              <section
                id="security-considerations"
                inlist=""
                rel="schema:hasPart"
                resource="#security-considerations"
              >
              <h3 property="schema:name">Security considerations</h3>
              <div>
                <p><strong>This section is normative.</strong></p>
                <h4>Handling Rich Text</h4>
                <p>
                  Whenever messages contain rich text in HTML form, or in markdown form which is converted
                  into HTML and either stored in a pod or displayed in a browser or both,
                  then great care must be taken to avoid injection attacks.  Any user-provided HTML 
                  must be scrubbed for anything like embedded javascript URLs or the long list of
                  vulnerabilities around injection of code into HTML.
                  User-generated HTML content must be scrubbed BOTH before being stored and also 
                  when read from a pod before it is displayed.
                </p>
                <h4>Impersonation by unscrupulous users</h4>
                <p>
                  It is left to each user to fill in their own webid as author of each message or action.
                  This is a question of trust, as anyone else in the group with access could
                  write an app to append a message with a different user's webId. 
                  There are two ways in which this is being addressed. One is that digital signature
                  is used to provide assurance that the sender was indeed the one given in the message.
                  Another is work on server-side shape filtering in which the writer's identity (and the date) would
                  be checked or forced by the server.
                </p>
              </div>

              </section>
              <section
              id="privacy-considerations"
              inlist=""
              rel="schema:hasPart"
              resource="#privacy-considerations"
            >

              <h3 property="schema:name">Privacy considerations</h3>
              <div datatype="rdf:HTML" property="schema:description">
                  <p><em>This section is non-normative.</em></p>
                  <p>
                    Typically when a user joins a chat where they allowed to
                    contribute, then the chat app adds them to the list of participants.
                    Their participation is captured automatically.
                    This is valuable to have the list of participants
                    but some users might like to opt out and just lurk.
                    On the other hand, other users might not want
                    unregistered lurking to be possible, so a confirmation step could be made an option.
                    

                  </p>
                  <p>One useful function of chat software is to capture the participants as a group
                    and then use that group in other collaborative tools, and in access control settings, and so on.
                  So to join a chat could end up involving you in other opportunities.
                  </p>
                </div>

              </section>
              <section
              id="i18n-considerations"
              inlist=""
              rel="schema:hasPart"
              resource="#i18n-considerations"
            >


                <h3 property="schema:name">Internationalization considerations</h3>
                <p>This section is non-normative.</p>

                <p>This document has assumed left-to-right flow
                  in all the examples, but clearly chat should also work in right-to-left or vertical cultures.
                  Should there be an option for laying out the chat with left and right reversed?</p>

                  <p>The Solid system allows a user to put in their profiles (ans/or preferences) their abilities
                    at natural languages. This can be picked by the implemntation and used to
                    select the language of the UI, and possibly
                     even to offer to translate the messages of the chat.
                  </p>
                
              </section>

            <section
            id="accy-considerations"
            inlist=""
            rel="schema:hasPart"
            resource="#accy-considerations"
          >
          <h3>Accessibility Considerations</h3>
          <div>
            <p>This section is non-normative.</p>
            <p>As chat is a ubiquitous functionality in collaborative systems, and in the world,
              being able to partcipate in chat independent of ability or disability is of course essential.
              A few points follow.</p>
          <ul>
            <li>All the usual techniques, ideas, and guidelines apply as any web app, all apply.</li>
            <li>Chat is often used in a mobile context, and may
              switch between small-screen and large-screen devices, and so real-time adaptation is valuable.</li>
            <li>Completely separate implemntaions using for example conversational interfaces and/voice 
              can be built and interoperate through this specification with different apps used by differently able people.</li>
              <li>Implementing the user prefences for customization of the user interface is an important for accessibility</li>
              <li>Developing cross-app common user prefences allows customization of the user interfaces of all the apps. </li>
              <li>Text to speech and speech to text systems functionality is interesting.</li>
          </ul>
          </div>
          </section>
        
          <section
            class="appendix"
            id="references"
            inlist=""
            rel="schema:hasPart"
            resource="#references"
          >
            <h2 property="schema:name">References</h2>
            <div datatype="rdf:HTML" property="schema:description">
              <section
                id="normative-references"
                inlist=""
                rel="schema:hasPart"
                resource="#normative-references"
              >
                <h3 property="schema:name">Normative References</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <dl class="bibliography" resource="#Normative-References">
                    
                    <dt id="bib-RDF-SYNTAX-GRAMMAR">[RDF-SYNTAX-GRAMMAR]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/rdf-schema/"
                        rel="cito:citesAsAuthority"
                        ><cite>RDF-SYNTAX-GRAMMAR</cite></a
                      >.  Fabien Gandon; Guus Schreiber. <a href="http://www.w3.org/TR/rdf-syntax-grammar/">RDF 1.1 XML Syntax</a>. 9 January 2014. W3C Proposed Edited Recommendation. URL: <a href="http://www.w3.org/TR/rdf-syntax-grammar/">http://www.w3.org/TR/rdf-syntax-grammar/</a>
                    </dd>
                    <dt id="bib-rdfa-core">[RDFA-CORE]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/rdf-schema/"
                        rel="cito:citesAsAuthority"
                        ><cite>RDFA-CORE</cite></a
                      >.  Ben Adida; Mark Birbeck; Shane McCarron; Ivan Herman et al. <a href="http://www.w3.org/TR/rdfa-core/">RDFa Core 1.1</a> - Second Edition. 22 August 2013. W3C Recommendation. URL: <a href="http://www.w3.org/TR/rdfa-core/">http://www.w3.org/TR/rdfa-core/</a>
                    </dd>
                    <dt id="bib-rdf-schema">[RDF-SCHEMA]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/rdf-schema/"
                        rel="cito:citesAsAuthority"
                        ><cite>RDF Schema 1.1</cite></a
                      >. Dan Brickley; Ramanathan Guha. W3C. 25 February 2014.
                      W3C Recommendation. URL:
                      <a href="https://www.w3.org/TR/rdf-schema/"
                        >https://www.w3.org/TR/rdf-schema/</a
                      >
                    </dd>
                    <dt id="bib-type-indexes">[TypeIndexes]</dt>
                    <dd>
                      <a
                        href="https://solid.gihub.io/type-indexes/"
                        rel="cito:citesAsAuthority"
                        ><cite>Solid Type Indexes/cite></a
                      >. Virginia Balseiro, Timea Turdean, Tim Berners-Lee, et al, Solid Organization, 2023 URL:
                      <a href="https://solid.gihub.io/type-indexes/"
                        >https://solid.gihub.io/type-indexes/</a
                      >
                    </dd>

                    <dt id="bib-rfc2119">[RFC2119]</dt>
                    <dd>
                      <a
                        href="https://datatracker.ietf.org/doc/html/rfc2119"
                        rel="cito:citesAsAuthority"
                        ><cite
                          >Key words for use in RFCs to Indicate Requirement
                          Levels</cite
                        ></a
                      >. S. Bradner. IETF. March 1997. Best Current Practice.
                      URL:
                      <a href="https://datatracker.ietf.org/doc/html/rfc2119"
                        >https://datatracker.ietf.org/doc/html/rfc2119</a
                      >
                    </dd>
                    <dt id="bib-rfc8174">[RFC8174]</dt>
                    <dd>
                      <a
                        href="https://datatracker.ietf.org/doc/html/rfc8174"
                        rel="cito:citesAsAuthority"
                        ><cite
                          >Ambiguity of Uppercase vs Lowercase in RFC 2119 Key
                          Words</cite
                        ></a
                      >. B. Leiba. IETF. May 2017. Best Current Practice. URL:
                      <a href="https://datatracker.ietf.org/doc/html/rfc8174"
                        >https://datatracker.ietf.org/doc/html/rfc8174</a
                      >
                    </dd>
                    <dt id="bib-shacl">[SHACL]</dt>
                    <dd>
                      <a
                        href="http://www.w3.org/TR/turtle/"
                        rel="cito:citesAsAuthority"
                        ><cite>SCHACL</cite></a
                      >. Holger Knublauch; Dimitris Kontokostas. <a href="https://www.w3.org/TR/shacl/">Shapes Constraint Language (SHACL)</a>. 20 July 2017. REC. URL: <a href="https://www.w3.org/TR/shacl/">https://www.w3.org/TR/shacl/</a>
                    </dd>
                    <dt id="bib-shex">[ShEx]</dt>
                    <dd>
                      <a
                        href="http://www.w3.org/TR/turtle/"
                        rel="cito:citesAsAuthority"
                        ><cite>ShEx</cite></a
                      >. Eric Prud'hommeaux; et al. <a href="http://shex.io/shex-semantics/index.html">Shape Expressions Language 2.1</a>. URL: <a href="http://shex.io/shex-semantics/index.html">http://shex.io/shex-semantics/index.html</a>
                    </dd>
                    <dt id="bib-solid-protocol">[SOLID-PROTOCOL]</dt>
                    <dd>
                      <a
                        href="https://solidproject.org/TR/protocol"
                        rel="cito:citesAsAuthority"
                        ><cite>Solid Protocol</cite></a
                      >. Sarven Capadisli; Tim Berners-Lee; Ruben Verborgh;
                      Kjetil Kjernsmo. W3C Solid Community Group. 31 December
                      2022. Version 0.10.0 URL:
                      <a href="https://solidproject.org/TR/protocol"
                        >https://solidproject.org/TR/protocol</a
                      >
                    </dd>
                    <dt id="bib-turtle">[turtle]</dt>
                    <dd>
                      <a
                        href="http://www.w3.org/TR/turtle/"
                        rel="cito:citesAsAuthority"
                        ><cite>turtle</cite></a
                      >. Eric Prud'hommeaux; Gavin Carothers. <a href="https://www.w3.org/TR/turtle/">RDF 1.1 Turtle</a>. 9 January 2014. W3C Proposed Recommendation. URL: <a href="http://www.w3.org/TR/turtle/">http://www.w3.org/TR/turtle/</a>
                    </dd>
                    <dt id="bib-vcard">[VCARD-RDF]</dt>
                    <dd>
                      <a
                        href="http://www.w3.org/TR/turtle/"
                        rel="cito:citesAsAuthority"
                        ><cite>vCard Ontology - for describing People and Organizations</cite></a
                      >. Renato Iannella; James McKinney. W3C. 22 May 2014. W3C Note. URL: <a href="https://www.w3.org/TR/vcard-rdf/">https://www.w3.org/TR/vcard-rdf/</a>
                    </dd>
                    <dt id="bib-webid">[WEBID]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/2005/Incubator/webid/spec/identity/"
                        rel="cito:citesAsAuthority"
                        ><cite>WebID 1.0</cite></a
                      >. Andrei Sambra; Stéphane Corlosquet. W3C WebID Community
                      Group. 5 March 2014. W3C Editor’s Draft. URL:
                      <a
                        href="https://www.w3.org/2005/Incubator/webid/spec/identity/"
                        >https://www.w3.org/2005/Incubator/webid/spec/identity/</a
                      >
                    </dd>
                  </dl>
                </div>
              </section>

              <section
                id="informative-references"
                inlist=""
                rel="schema:hasPart"
                resource="#informative-references"
              >
                <h3 property="schema:name">Informative References</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <dl class="bibliography" resource="#Informative-References">
                    <dt id="bib-coga-usable">[COGA-USABLE]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/coga-usable/"
                        rel="cito:citesAsPotentialSolution"
                        ><cite
                          >Making content usable for people with cognitive and
                          learning disabilities</cite
                        ></a
                      >. Lisa Seeman-Horwitz; Rachael Bradley Montgomery; Steve
                      Lee; Ruoxi Ran. W3C. 11 December 2020. W3C Working Draft.
                      URL:
                      <a href="https://www.w3.org/TR/coga-usable/"
                        >https://www.w3.org/TR/coga-usable/</a
                      >
                    </dd>
                    <dt id="bib-privacy-principles">[PRIVACY-PRINCIPLES]</dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/privacy-principles/"
                        rel="cito:citesAsPotentialSolution"
                        ><cite>Privacy Principles</cite></a
                      >. Robin Berjon; Jeffrey Yasskin. W3C. 12 May 2022. W3C
                      Group Draft Note. URL:
                      <a href="https://www.w3.org/TR/privacy-principles/"
                        >https://www.w3.org/TR/privacy-principles/</a
                      >
                    </dd>
                    <dt id="bib-security-privacy-questionnaire">
                      [SECURITY-PRIVACY-QUESTIONNAIRE]
                    </dt>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/security-privacy-questionnaire/"
                        rel="cito:citesAsPotentialSolution"
                        ><cite
                          >Self-Review Questionnaire: Security and Privacy</cite
                        ></a
                      >. Theresa O'Connor; Peter Snyder. W3C. 23 March 2021. W3C
                      Note. URL:
                      <a
                        href="https://www.w3.org/TR/security-privacy-questionnaire/"
                        >https://www.w3.org/TR/security-privacy-questionnaire/</a
                      >
                    </dd>
                    <dd>
                      <a
                        href="https://www.w3.org/TR/wcag-3.0/"
                        rel="cito:citesAsPotentialSolution"
                        ><cite>W3C Accessibility Guidelines (WCAG) 3.0</cite></a
                      >. Jeanne F Spellman; Rachael Bradley Montgomery; Shawn
                      Lauriat; Michael Cooper. W3C. 21 January 2021. W3C Working
                      Draft. URL:
                      <a href="https://www.w3.org/TR/wcag-3.0/"
                        >https://www.w3.org/TR/wcag-3.0/</a
                      >
                    </dd>
                  </dl>
                </div>
              </section>
            </div>
          </section>
        </div>


      </article>
    </main>

    <p role="navigation" id="back-to-top">
      <a href="#toc"><abbr title="Back to top">↑</abbr></a>
    </p>

    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  </body>
</html>
